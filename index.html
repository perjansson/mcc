<!DOCTYPE html>
<html>
<head>
    <title>Meeting cost calculator</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.1/jquery.mobile-1.2.1.min.css" />
    <style>
        .ui-title {
            margin: 0.6em 10% 0.8em !important;
        }
    </style>

    <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.1/jquery.mobile-1.2.1.min.js"></script>

    <script type="text/javascript">
        var meetingStartTime;
        var timerId = 0;

        $(function () {
            $("#startMeetingButton").click(function() {
                meetingStartTime = new Date();
                clearInterval(timerId);
                timerId = setInterval(meetingCostCalculator, 1);
            })
        });

        var meetingCostCalculator = function() {
            var meetingCurrentTime = new Date();
            var numberOfAttendees = $('#numberOfAttendees');
            var averageHourlyRate = $('#averageHourlyRate');
            var meetingCostPerSecond = numberOfAttendees.val() * (averageHourlyRate.val() / 3600);
            var elapsedMeetingTimeInSeconds = (meetingCurrentTime - meetingStartTime) / 1000;
            var currentMeetingCost = meetingCostPerSecond * elapsedMeetingTimeInSeconds;
            var rounded = Math.round(currentMeetingCost).toFixed(0);
            $('#meetingCost').text("Meeting cost: " + rounded + " " + $('#currency').val());
        }

        $("#numberOfAttendees").keyup(function(event){
            if(event.keyCode == 13){
                $("#startMeetingButton").click();
            }
        });

        $("#averageHourlyRate").keyup(function(event){
            alert(event.keyCode);
            if(event.keyCode == 13){
                $("#startMeetingButton").click();
            }
        });

        $("#currency").keyup(function(event){
            if(event.keyCode == 13){
                $("#startMeetingButton").click();
            }
        });

    </script>

</head>

<body style="text-align: center">

<div data-role="page" data-theme="a">

    <div data-role="header">
        <h1>Meeting cost calculator</h1>
    </div>

    <div data-role="content">
        <input id="numberOfAttendees" value="Number of attendees" onkeydown="if (event.keyCode == 13) document.getElementById('startMeetingButton').click()" onfocus="if (this.value=='Number of attendees') this.value = ''" onblur="if (this.value=='') this.value = 'Number of attendees'" type="text"><br>
        <input id="averageHourlyRate" value="Average hourly rate" onkeydown="if (event.keyCode == 13) document.getElementById('startMeetingButton').click()" onfocus="if (this.value=='Average hourly rate') this.value = ''" onblur="if (this.value=='') this.value = 'Average hourly rate'" type="text"><br>
        <input id="currency" value="Currency" onkeydown="if (event.keyCode == 13) document.getElementById('startMeetingButton').click()" onfocus="if (this.value=='Currency') this.value = ''" onblur="if (this.value=='') this.value = 'Currency'" type="text"><br>
        <input id="startMeetingButton" value='Start meeting' type="submit" />  <br>
        <h2><span id="meetingCost" style="width: 50%; margin: 0 auto"></span></h2>
    </div>

</div>

</body>
</html>
